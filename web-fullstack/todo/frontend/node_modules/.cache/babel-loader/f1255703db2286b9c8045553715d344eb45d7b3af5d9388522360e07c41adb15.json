{"ast":null,"code":"var _jsxFileName = \"/home/andrewacashner/Documents/computing/javascript/react/todo/src/components/TaskList.js\",\n  _s = $RefreshSig$();\nimport { useContext } from \"react\";\nimport ToDoContext from \"../store/ToDoContext\";\nimport ListItem from \"./ListItem\";\n\n// Drag and drop functions\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction isDraggedOverSelf(event) {\n  return event.target.id === event.dataTransfer.getData(\"text/uuid\");\n}\nfunction isDraggedOverNext(event, items) {\n  let dragged = event.dataTransfer.getData(\"text/uuid\");\n  let current = event.target.id;\n  const getIndex = id => items.list.findIndex(i => i.id === id);\n  return getIndex(current) - getIndex(dragged) === 1;\n}\nfunction TaskList() {\n  _s();\n  let context = useContext(ToDoContext);\n  let items = context.items.get;\n  let setItems = context.items.set;\n  function dropListItem(event) {\n    event.preventDefault();\n    if (items.list.length > 1) {\n      let fromID = event.dataTransfer.getData(\"text/uuid\");\n\n      // Check if item was dropped below the list items, in the extra space we\n      // leave at bottom of the ol.todo\n      let toID = event.target.className === \"todo\" ? \"bottom\" : event.target.id;\n      if (fromID !== toID && !isDraggedOverNext(event, items)) {\n        setItems(prevItems => prevItems.moveWithinArray(fromID, toID));\n      }\n    }\n  }\n  function dragoverListItem(event) {\n    event.preventDefault();\n    if (event.target.tagName === \"LI\" && !isDraggedOverSelf(event) && !isDraggedOverNext(event, items)) {\n      event.target.classList.add(\"gapAbove\");\n    }\n  }\n  function makeListItem(item) {\n    return /*#__PURE__*/_jsxDEV(ListItem, {\n      children: item\n    }, item.id, false, {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 7\n    }, this);\n  }\n  if (items.list.length > 0) {\n    let [done, notDone] = items.partition(i => i.isDone);\n    const ItemsDone = () => done ? done.list.map(makeListItem) : null;\n    const ItemsNotDone = () => notDone.list.map(makeListItem);\n    console.log(notDone.list);\n    return /*#__PURE__*/_jsxDEV(\"section\", {\n      id: \"lists\",\n      children: [/*#__PURE__*/_jsxDEV(\"ol\", {\n        className: \"todo\",\n        onDragOver: dragoverListItem,\n        onDrop: dropListItem,\n        children: /*#__PURE__*/_jsxDEV(ItemsNotDone, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 66,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 63,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"ol\", {\n        className: \"todoDone\",\n        children: /*#__PURE__*/_jsxDEV(ItemsDone, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 69,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 68,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 7\n    }, this);\n  }\n}\n_s(TaskList, \"b9L3QQ+jgeyIrH0NfHrJ8nn7VMU=\");\n_c = TaskList;\nexport default TaskList;\nvar _c;\n$RefreshReg$(_c, \"TaskList\");","map":{"version":3,"names":["useContext","ToDoContext","ListItem","jsxDEV","_jsxDEV","isDraggedOverSelf","event","target","id","dataTransfer","getData","isDraggedOverNext","items","dragged","current","getIndex","list","findIndex","i","TaskList","_s","context","get","setItems","set","dropListItem","preventDefault","length","fromID","toID","className","prevItems","moveWithinArray","dragoverListItem","tagName","classList","add","makeListItem","item","children","fileName","_jsxFileName","lineNumber","columnNumber","done","notDone","partition","isDone","ItemsDone","map","ItemsNotDone","console","log","onDragOver","onDrop","_c","$RefreshReg$"],"sources":["/home/andrewacashner/Documents/computing/javascript/react/todo/src/components/TaskList.js"],"sourcesContent":["import { useContext } from \"react\";\nimport ToDoContext from \"../store/ToDoContext\";\nimport ListItem from \"./ListItem\";\n\n// Drag and drop functions\nfunction isDraggedOverSelf(event) {\n  return event.target.id === event.dataTransfer.getData(\"text/uuid\");\n}\n\nfunction isDraggedOverNext(event, items) {\n  let dragged = event.dataTransfer.getData(\"text/uuid\");\n  let current = event.target.id;\n  const getIndex = id => items.list.findIndex(i => i.id === id);\n  return getIndex(current) - getIndex(dragged) === 1;\n}\n\nfunction TaskList() {\n  let context = useContext(ToDoContext);\n  let items = context.items.get;\n  let setItems = context.items.set;\n\n  function dropListItem(event) {\n    event.preventDefault()\n\n    if (items.list.length > 1) {\n      let fromID = event.dataTransfer.getData(\"text/uuid\");\n\n      // Check if item was dropped below the list items, in the extra space we\n      // leave at bottom of the ol.todo\n      let toID = (event.target.className === \"todo\") \n        ? \"bottom\" : event.target.id;\n\n      if (fromID !== toID && !isDraggedOverNext(event, items)) {\n        setItems(prevItems => prevItems.moveWithinArray(fromID, toID));\n      }\n    }\n  }\n\n  function dragoverListItem(event) {\n    event.preventDefault();\n    if (event.target.tagName === \"LI\" \n      && !isDraggedOverSelf(event) \n      && !isDraggedOverNext(event, items)) {\n      event.target.classList.add(\"gapAbove\");\n    }\n  }\n \n  function makeListItem(item) {\n    return(\n      <ListItem key={item.id}>{item}</ListItem>\n    );\n  }\n\n  if (items.list.length > 0) {\n    let [done, notDone] = items.partition(i => i.isDone);\n    \n    const ItemsDone = () => (done) ? done.list.map(makeListItem) : null;\n    const ItemsNotDone = () => notDone.list.map(makeListItem);\n    console.log(notDone.list);\n\n    return(\n      <section id=\"lists\">\n        <ol className=\"todo\"\n            onDragOver={dragoverListItem}\n            onDrop={dropListItem}>\n          <ItemsNotDone />\n        </ol>\n        <ol className=\"todoDone\">\n          <ItemsDone />\n        </ol>\n      </section>\n    );\n  }\n}\n\nexport default TaskList;\n\n"],"mappings":";;AAAA,SAASA,UAAU,QAAQ,OAAO;AAClC,OAAOC,WAAW,MAAM,sBAAsB;AAC9C,OAAOC,QAAQ,MAAM,YAAY;;AAEjC;AAAA,SAAAC,MAAA,IAAAC,OAAA;AACA,SAASC,iBAAiBA,CAACC,KAAK,EAAE;EAChC,OAAOA,KAAK,CAACC,MAAM,CAACC,EAAE,KAAKF,KAAK,CAACG,YAAY,CAACC,OAAO,CAAC,WAAW,CAAC;AACpE;AAEA,SAASC,iBAAiBA,CAACL,KAAK,EAAEM,KAAK,EAAE;EACvC,IAAIC,OAAO,GAAGP,KAAK,CAACG,YAAY,CAACC,OAAO,CAAC,WAAW,CAAC;EACrD,IAAII,OAAO,GAAGR,KAAK,CAACC,MAAM,CAACC,EAAE;EAC7B,MAAMO,QAAQ,GAAGP,EAAE,IAAII,KAAK,CAACI,IAAI,CAACC,SAAS,CAACC,CAAC,IAAIA,CAAC,CAACV,EAAE,KAAKA,EAAE,CAAC;EAC7D,OAAOO,QAAQ,CAACD,OAAO,CAAC,GAAGC,QAAQ,CAACF,OAAO,CAAC,KAAK,CAAC;AACpD;AAEA,SAASM,QAAQA,CAAA,EAAG;EAAAC,EAAA;EAClB,IAAIC,OAAO,GAAGrB,UAAU,CAACC,WAAW,CAAC;EACrC,IAAIW,KAAK,GAAGS,OAAO,CAACT,KAAK,CAACU,GAAG;EAC7B,IAAIC,QAAQ,GAAGF,OAAO,CAACT,KAAK,CAACY,GAAG;EAEhC,SAASC,YAAYA,CAACnB,KAAK,EAAE;IAC3BA,KAAK,CAACoB,cAAc,CAAC,CAAC;IAEtB,IAAId,KAAK,CAACI,IAAI,CAACW,MAAM,GAAG,CAAC,EAAE;MACzB,IAAIC,MAAM,GAAGtB,KAAK,CAACG,YAAY,CAACC,OAAO,CAAC,WAAW,CAAC;;MAEpD;MACA;MACA,IAAImB,IAAI,GAAIvB,KAAK,CAACC,MAAM,CAACuB,SAAS,KAAK,MAAM,GACzC,QAAQ,GAAGxB,KAAK,CAACC,MAAM,CAACC,EAAE;MAE9B,IAAIoB,MAAM,KAAKC,IAAI,IAAI,CAAClB,iBAAiB,CAACL,KAAK,EAAEM,KAAK,CAAC,EAAE;QACvDW,QAAQ,CAACQ,SAAS,IAAIA,SAAS,CAACC,eAAe,CAACJ,MAAM,EAAEC,IAAI,CAAC,CAAC;MAChE;IACF;EACF;EAEA,SAASI,gBAAgBA,CAAC3B,KAAK,EAAE;IAC/BA,KAAK,CAACoB,cAAc,CAAC,CAAC;IACtB,IAAIpB,KAAK,CAACC,MAAM,CAAC2B,OAAO,KAAK,IAAI,IAC5B,CAAC7B,iBAAiB,CAACC,KAAK,CAAC,IACzB,CAACK,iBAAiB,CAACL,KAAK,EAAEM,KAAK,CAAC,EAAE;MACrCN,KAAK,CAACC,MAAM,CAAC4B,SAAS,CAACC,GAAG,CAAC,UAAU,CAAC;IACxC;EACF;EAEA,SAASC,YAAYA,CAACC,IAAI,EAAE;IAC1B,oBACElC,OAAA,CAACF,QAAQ;MAAAqC,QAAA,EAAgBD;IAAI,GAAdA,IAAI,CAAC9B,EAAE;MAAAgC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAkB,CAAC;EAE7C;EAEA,IAAI/B,KAAK,CAACI,IAAI,CAACW,MAAM,GAAG,CAAC,EAAE;IACzB,IAAI,CAACiB,IAAI,EAAEC,OAAO,CAAC,GAAGjC,KAAK,CAACkC,SAAS,CAAC5B,CAAC,IAAIA,CAAC,CAAC6B,MAAM,CAAC;IAEpD,MAAMC,SAAS,GAAGA,CAAA,KAAOJ,IAAI,GAAIA,IAAI,CAAC5B,IAAI,CAACiC,GAAG,CAACZ,YAAY,CAAC,GAAG,IAAI;IACnE,MAAMa,YAAY,GAAGA,CAAA,KAAML,OAAO,CAAC7B,IAAI,CAACiC,GAAG,CAACZ,YAAY,CAAC;IACzDc,OAAO,CAACC,GAAG,CAACP,OAAO,CAAC7B,IAAI,CAAC;IAEzB,oBACEZ,OAAA;MAASI,EAAE,EAAC,OAAO;MAAA+B,QAAA,gBACjBnC,OAAA;QAAI0B,SAAS,EAAC,MAAM;QAChBuB,UAAU,EAAEpB,gBAAiB;QAC7BqB,MAAM,EAAE7B,YAAa;QAAAc,QAAA,eACvBnC,OAAA,CAAC8C,YAAY;UAAAV,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAE;MAAC;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACd,CAAC,eACLvC,OAAA;QAAI0B,SAAS,EAAC,UAAU;QAAAS,QAAA,eACtBnC,OAAA,CAAC4C,SAAS;UAAAR,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAE;MAAC;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACX,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACE,CAAC;EAEd;AACF;AAACvB,EAAA,CAzDQD,QAAQ;AAAAoC,EAAA,GAARpC,QAAQ;AA2DjB,eAAeA,QAAQ;AAAC,IAAAoC,EAAA;AAAAC,YAAA,CAAAD,EAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}