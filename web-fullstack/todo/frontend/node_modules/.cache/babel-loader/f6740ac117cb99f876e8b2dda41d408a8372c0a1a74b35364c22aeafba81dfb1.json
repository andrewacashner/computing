{"ast":null,"code":"import ToDoItem from \"./ToDoItem\";\nexport default class ToDoList {\n  constructor(list = [], draft = new ToDoItem()) {\n    this.list = [...list];\n    this.draftEntry = draft;\n  }\n  cloneWithDraft(draft) {\n    return new ToDoList(this.list, draft);\n  }\n  moveItemToDraft(item) {\n    return this.removeItem(item).cloneWithDraft(item);\n  }\n  partition(testFn) {\n    let results = {\n      true: [],\n      false: []\n    };\n    if (this.list.length > 0) {\n      this.list.forEach(i => results[testFn(i)].push(i));\n    }\n    return [results.true, results.false].map(r => new ToDoList(r));\n  }\n  toSortedByDate() {\n    let [deadlines, noDeadlines] = this.partition(i => i.deadline !== null);\n    let [dates, noDates] = deadlines.partition(i => i.deadlineDate !== null);\n    let datesSorted = dates.list.toSorted((a, b) => a.deadlineDate - b.deadlineDate);\n    function stringCompareFn(a, b) {\n      [a, b] = [a, b].map(i => i.toLowerCase());\n      if (a < b) return -1;else if (a > b) return 1;else return 0;\n    }\n    let noDatesSorted = noDates.list.toSorted((a, b) => stringCompareFn(a.deadline, b.deadline));\n    let noDeadlinesSorted = noDeadlines.list.toSorted((a, b) => stringCompareFn(a.task, b.task));\n    let newItems = [...noDeadlinesSorted, ...noDatesSorted, ...datesSorted];\n    return new ToDoList(newItems);\n  }\n  hasIdenticalContents(other) {\n    let compared = this.list.map((item, index) => item === other.list[index]);\n    let tested = compared.every(i => i === true);\n    return tested;\n  }\n  isSorted() {\n    let sorted = this.toSortedByDate();\n    return this.hasIdenticalContents(sorted);\n  }\n  append(item) {\n    return new ToDoList([...this.list, item]);\n  }\n  moveWithinArray(fromID, toID) {\n    console.log(`Move from item ${fromID} to item ${toID}`);\n    function insertBefore(array, matchFn, item) {\n      let insertPoint = array.findIndex(matchFn);\n      let before = array.slice(0, insertPoint);\n      let after = array.slice(insertPoint);\n      return [...before, item, ...after];\n    }\n    let itemToMove = this.list.find(i => i.id === fromID);\n    let rest = this.list.filter(i => i !== itemToMove);\n    let newItems = [];\n    if (toID === \"bottom\") {\n      console.log(\"Move item to bottom\");\n      newItems = [...rest, itemToMove];\n    } else {\n      console.log(\"Insert item\");\n      newItems = insertBefore(rest, i => i.id === toID, itemToMove);\n    }\n    return new ToDoList(newItems);\n  }\n  removeItem(item) {\n    let filtered = this.list.filter(i => i !== item);\n    return new ToDoList(filtered);\n  }\n  toggleDoneStatus(item) {\n    let toggledItem = item.toggled();\n    console.log(`Marking item as ${toggledItem.doneStatus}`);\n    let items = this.list;\n    let split = items.indexOf(item);\n    let before = items.slice(0, split);\n    let after = items.slice(split + 1);\n    return new ToDoList([...before, toggledItem, ...after]);\n  }\n  setAllItemStatus(isDone) {\n    let adjusted = this.list.map(i => new ToDoItem({\n      ...i,\n      isDone: isDone\n    }));\n    return new ToDoList(adjusted);\n  }\n  areAnyLeftToDo() {\n    return this.list.some(i => i.isDone === false);\n  }\n  areAnyDone() {\n    return this.list.some(i => i.isDone === true);\n  }\n  activeOrNot(test) {\n    return test ? \"active\" : \"inactive\";\n  }\n  checkAllStatus() {\n    return this.activeOrNot(this.areAnyLeftToDo());\n  }\n  uncheckAllStatus() {\n    return this.activeOrNot(this.areAnyDone());\n  }\n  unsortedStatus() {\n    return this.activeOrNot(!this.isSorted());\n  }\n}","map":{"version":3,"names":["ToDoItem","ToDoList","constructor","list","draft","draftEntry","cloneWithDraft","moveItemToDraft","item","removeItem","partition","testFn","results","true","false","length","forEach","i","push","map","r","toSortedByDate","deadlines","noDeadlines","deadline","dates","noDates","deadlineDate","datesSorted","toSorted","a","b","stringCompareFn","toLowerCase","noDatesSorted","noDeadlinesSorted","task","newItems","hasIdenticalContents","other","compared","index","tested","every","isSorted","sorted","append","moveWithinArray","fromID","toID","console","log","insertBefore","array","matchFn","insertPoint","findIndex","before","slice","after","itemToMove","find","id","rest","filter","filtered","toggleDoneStatus","toggledItem","toggled","doneStatus","items","split","indexOf","setAllItemStatus","isDone","adjusted","areAnyLeftToDo","some","areAnyDone","activeOrNot","test","checkAllStatus","uncheckAllStatus","unsortedStatus"],"sources":["/home/andrewacashner/Documents/computing/javascript/react/todo/src/classes/ToDoList.js"],"sourcesContent":["import ToDoItem from \"./ToDoItem\";\n\nexport default class ToDoList {\n  list;\n  draftEntry;\n\n  constructor(list = [], draft = new ToDoItem()) {\n    this.list = [...list];\n    this.draftEntry = draft;\n  }\n\n  cloneWithDraft(draft) {\n    return new ToDoList(this.list, draft);\n  }\n\n  moveItemToDraft(item) {\n    return this.removeItem(item).cloneWithDraft(item);\n  }\n\n  partition(testFn) {\n    let results = { true: [], false: [] };\n    if (this.list.length > 0) {\n      this.list.forEach(i => results[testFn(i)].push(i));\n    }\n    return [results.true, results.false].map(r => new ToDoList(r));\n  }\n\n  toSortedByDate() {\n    let [deadlines, noDeadlines] = this.partition(i => i.deadline !== null);\n\n    let [dates, noDates] = deadlines.partition(i => i.deadlineDate !== null);\n\n    let datesSorted = dates.list.toSorted(\n      (a, b) => a.deadlineDate - b.deadlineDate);\n\n    function stringCompareFn(a, b) {\n      [a, b] = [a, b].map(i => i.toLowerCase());\n      if (a < b) return -1;\n      else if (a > b) return 1;\n      else return 0;\n    }\n\n    let noDatesSorted = noDates.list.toSorted(\n      (a, b) => stringCompareFn(a.deadline, b.deadline));\n\n    let noDeadlinesSorted = noDeadlines.list.toSorted(\n      (a, b) => stringCompareFn(a.task, b.task));\n\n    let newItems = [...noDeadlinesSorted, ...noDatesSorted, ...datesSorted];\n    return new ToDoList(newItems);\n  }\n\n  hasIdenticalContents(other) {\n    let compared = this.list.map((item, index) => item === other.list[index]);\n    let tested = compared.every(i => i === true);\n    return tested;\n  }\n \n  isSorted() {\n    let sorted = this.toSortedByDate();\n    return this.hasIdenticalContents(sorted);\n  }\n\n  append(item) {\n    return new ToDoList([...this.list, item]);\n  }\n\n  moveWithinArray(fromID, toID) {\n    console.log(`Move from item ${fromID} to item ${toID}`);\n    function insertBefore(array, matchFn, item) {\n      let insertPoint = array.findIndex(matchFn);\n      let before = array.slice(0, insertPoint);\n      let after = array.slice(insertPoint);\n      return [...before, item, ...after];\n    }\n\n    let itemToMove = this.list.find(i => i.id === fromID);\n    let rest = this.list.filter(i => i !== itemToMove);\n\n    let newItems = [];\n    if (toID === \"bottom\") {\n      console.log(\"Move item to bottom\");\n      newItems = [...rest, itemToMove];\n    } else {\n      console.log(\"Insert item\");\n      newItems = insertBefore(rest, (i => i.id === toID), itemToMove);\n    }\n    return new ToDoList(newItems);\n  }\n\n  removeItem(item) { \n    let filtered = this.list.filter(i => i !== item);\n    return new ToDoList(filtered);\n  }\n\n  toggleDoneStatus(item) {\n    let toggledItem = item.toggled();\n    console.log(`Marking item as ${toggledItem.doneStatus}`);\n\n    let items = this.list;\n    let split = items.indexOf(item);\n    let before = items.slice(0, split);\n    let after = items.slice(split + 1);\n    return new ToDoList([...before, toggledItem, ...after]);\n  }\n\n  setAllItemStatus(isDone) {\n    let adjusted = this.list.map(i => new ToDoItem({...i, isDone: isDone}));\n    return new ToDoList(adjusted);\n  }\n\n  areAnyLeftToDo() {\n    return this.list.some(i => i.isDone === false);\n  }\n  \n  areAnyDone() {\n    return this.list.some(i => i.isDone === true);\n  }\n\n  activeOrNot(test) {\n    return (test) ? \"active\" : \"inactive\";\n  }\n\n  checkAllStatus() {\n    return this.activeOrNot(this.areAnyLeftToDo());\n  }\n\n  uncheckAllStatus() {\n    return this.activeOrNot(this.areAnyDone());\n  }\n\n  unsortedStatus() {\n    return this.activeOrNot(!this.isSorted());\n  }\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}