{"ast":null,"code":"var _jsxFileName = \"/home/andrewacashner/Documents/computing/javascript/react/todo/src/components/TaskList.js\";\nimport { ToDoItem } from \"../classes/ToDoItem\";\nimport Utilities from \"../classes/Utitilites\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction TaskList(props) {\n  let items = props.itemState.obj;\n  let setItems = props.itemState.fn;\n  let setFormDefaults = props.formState.fn;\n  function updateItemsWithToggledItem(items, item) {\n    return function () {\n      let toggledItem = ToDoItem.toggled(item);\n      console.log(`Marking item as ${toggledItem.doneStatus}`);\n      let split = items.indexOf(item);\n      let before = items.slice(0, split);\n      let after = items.slice(split + 1);\n      let newItems = [...before, toggledItem, ...after];\n      setItems(newItems);\n    };\n  }\n  function dropListItem(event) {\n    function moveWithinArray(items, fromID, toID) {\n      console.log(`Move from item ${fromID} to item ${toID}`);\n      function insertBefore(array, matchFn, item) {\n        let insertPoint = array.findIndex(matchFn);\n        let before = array.slice(0, insertPoint);\n        let after = array.slice(insertPoint);\n        return [...before, item, ...after];\n      }\n      let itemToMove = items.find(i => i.id === fromID);\n      let rest = items.filter(i => i !== itemToMove);\n      let newItems = [];\n      if (toID === \"bottom\") {\n        console.log(\"Move item to bottom\");\n        newItems = [...rest, itemToMove];\n      } else {\n        console.log(\"Insert item\");\n        newItems = insertBefore(rest, i => i.id === toID, itemToMove);\n      }\n      return newItems;\n    }\n    event.preventDefault();\n    if (items.length > 1) {\n      let fromID = event.dataTransfer.getData(\"text/uuid\");\n\n      // Check if item was dropped below the list items, in the extra space we\n      // leave at bottom of the ol.todo\n      let toID = event.target.className === \"todo\" ? \"bottom\" : event.target.id;\n      if (fromID !== toID && !isDraggedOverNext(event, items)) {\n        let newItems = moveWithinArray(items, fromID, toID);\n        setItems(newItems);\n      }\n    }\n  }\n  function isDraggedOverSelf(event) {\n    return event.target.id === event.dataTransfer.getData(\"text/uuid\");\n  }\n  function isDraggedOverNext(event, items) {\n    let dragged = event.dataTransfer.getData(\"text/uuid\");\n    let current = event.target.id;\n    const getIndex = id => items.findIndex(i => i.id === id);\n    return getIndex(current) - getIndex(dragged) === 1;\n  }\n  function dragoverListItem(event) {\n    event.preventDefault();\n    if (event.target.tagName === \"LI\" && !isDraggedOverSelf(event) && !isDraggedOverNext(event, items)) {\n      event.target.classList.add(\"gapAbove\");\n    }\n  }\n  let [done, notDone] = Utilities.partition(items, i => i.isDone);\n  let itemState = {\n    obj: items,\n    fn: setItems\n  };\n  function ItemsDone() {\n    return done.map(i => /*#__PURE__*/_jsxDEV(ListItem, {\n      itemState: itemState,\n      formState: formState,\n      children: i\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 7\n    }, this));\n  }\n  function ItemsNotDone() {\n    return notDone.map(i => /*#__PURE__*/_jsxDEV(ListItem, {\n      itemState: itemState,\n      formState: formState,\n      children: i\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 7\n    }, this));\n  }\n  return /*#__PURE__*/_jsxDEV(\"section\", {\n    id: \"lists\",\n    children: [/*#__PURE__*/_jsxDEV(\"ol\", {\n      className: \"todo\",\n      onDragOver: dragoverListItem,\n      onDrop: dropListItem,\n      children: /*#__PURE__*/_jsxDEV(ItemsNotDone, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 106,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"ol\", {\n      className: \"todoDone\",\n      children: /*#__PURE__*/_jsxDEV(ItemsDone, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 109,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 102,\n    columnNumber: 5\n  }, this);\n}\n_c = TaskList;\nexport default TaskList;\nvar _c;\n$RefreshReg$(_c, \"TaskList\");","map":{"version":3,"names":["ToDoItem","Utilities","jsxDEV","_jsxDEV","TaskList","props","items","itemState","obj","setItems","fn","setFormDefaults","formState","updateItemsWithToggledItem","item","toggledItem","toggled","console","log","doneStatus","split","indexOf","before","slice","after","newItems","dropListItem","event","moveWithinArray","fromID","toID","insertBefore","array","matchFn","insertPoint","findIndex","itemToMove","find","i","id","rest","filter","preventDefault","length","dataTransfer","getData","target","className","isDraggedOverNext","isDraggedOverSelf","dragged","current","getIndex","dragoverListItem","tagName","classList","add","done","notDone","partition","isDone","ItemsDone","map","ListItem","children","fileName","_jsxFileName","lineNumber","columnNumber","ItemsNotDone","onDragOver","onDrop","_c","$RefreshReg$"],"sources":["/home/andrewacashner/Documents/computing/javascript/react/todo/src/components/TaskList.js"],"sourcesContent":["import { ToDoItem } from \"../classes/ToDoItem\";\nimport Utilities from \"../classes/Utitilites\";\n\nfunction TaskList(props) {\n  let items = props.itemState.obj;\n  let setItems = props.itemState.fn;\n  let setFormDefaults = props.formState.fn;\n\n  function updateItemsWithToggledItem(items, item) {\n    return function() {\n      let toggledItem = ToDoItem.toggled(item);\n      console.log(`Marking item as ${toggledItem.doneStatus}`);\n\n      let split = items.indexOf(item);\n      let before = items.slice(0, split);\n      let after = items.slice(split + 1);\n      let newItems = [...before, toggledItem, ...after]\n      setItems(newItems);\n    }\n  }\n\n  function dropListItem(event) {\n\n    function moveWithinArray(items, fromID, toID) {\n     \n      console.log(`Move from item ${fromID} to item ${toID}`);\n      function insertBefore(array, matchFn, item) {\n        let insertPoint = array.findIndex(matchFn);\n        let before = array.slice(0, insertPoint);\n        let after = array.slice(insertPoint);\n        return [...before, item, ...after];\n      }\n\n      let itemToMove = items.find(i => i.id === fromID);\n      let rest = items.filter(i => i !== itemToMove);\n\n      let newItems = [];\n      if (toID === \"bottom\") {\n        console.log(\"Move item to bottom\");\n        newItems = [...rest, itemToMove];\n      } else {\n        console.log(\"Insert item\");\n        newItems = insertBefore(rest, (i => i.id === toID), itemToMove);\n      }\n      return newItems;\n    }\n\n    event.preventDefault()\n\n    if (items.length > 1) {\n      let fromID = event.dataTransfer.getData(\"text/uuid\");\n\n      // Check if item was dropped below the list items, in the extra space we\n      // leave at bottom of the ol.todo\n      let toID = (event.target.className === \"todo\") \n        ? \"bottom\" : event.target.id;\n\n      if (fromID !== toID && !isDraggedOverNext(event, items)) {\n        let newItems = moveWithinArray(items, fromID, toID);\n        setItems(newItems);\n      }\n    }\n  }\n\n  function isDraggedOverSelf(event) {\n    return event.target.id === event.dataTransfer.getData(\"text/uuid\");\n  }\n\n  function isDraggedOverNext(event, items) {\n    let dragged = event.dataTransfer.getData(\"text/uuid\");\n    let current = event.target.id;\n    const getIndex = id => items.findIndex(i => i.id === id);\n    return getIndex(current) - getIndex(dragged) === 1;\n  }\n\n  function dragoverListItem(event) {\n\n    event.preventDefault();\n    if (event.target.tagName === \"LI\" \n      && !isDraggedOverSelf(event) \n      && !isDraggedOverNext(event, items)) {\n      event.target.classList.add(\"gapAbove\");\n    }\n  }\n\n \n  let [done, notDone] = Utilities.partition(items, (i => i.isDone));\n\n  let itemState = {obj: items, fn: setItems};\n\n  function ItemsDone() {\n    return(done.map(i => \n      <ListItem itemState={itemState} formState={formState}>{i}</ListItem>));\n  }\n\n  function ItemsNotDone() {\n    return(notDone.map(i =>\n      <ListItem itemState={itemState} formState={formState}>{i}</ListItem>));\n  }\n\n  return(\n    <section id=\"lists\">\n      <ol className=\"todo\"\n          onDragOver={dragoverListItem}\n          onDrop={dropListItem}>\n        <ItemsNotDone />\n      </ol>\n      <ol className=\"todoDone\">\n        <ItemsDone />\n      </ol>\n    </section>\n  );\n}\n\nexport default TaskList;\n\n"],"mappings":";AAAA,SAASA,QAAQ,QAAQ,qBAAqB;AAC9C,OAAOC,SAAS,MAAM,uBAAuB;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAE9C,SAASC,QAAQA,CAACC,KAAK,EAAE;EACvB,IAAIC,KAAK,GAAGD,KAAK,CAACE,SAAS,CAACC,GAAG;EAC/B,IAAIC,QAAQ,GAAGJ,KAAK,CAACE,SAAS,CAACG,EAAE;EACjC,IAAIC,eAAe,GAAGN,KAAK,CAACO,SAAS,CAACF,EAAE;EAExC,SAASG,0BAA0BA,CAACP,KAAK,EAAEQ,IAAI,EAAE;IAC/C,OAAO,YAAW;MAChB,IAAIC,WAAW,GAAGf,QAAQ,CAACgB,OAAO,CAACF,IAAI,CAAC;MACxCG,OAAO,CAACC,GAAG,CAAE,mBAAkBH,WAAW,CAACI,UAAW,EAAC,CAAC;MAExD,IAAIC,KAAK,GAAGd,KAAK,CAACe,OAAO,CAACP,IAAI,CAAC;MAC/B,IAAIQ,MAAM,GAAGhB,KAAK,CAACiB,KAAK,CAAC,CAAC,EAAEH,KAAK,CAAC;MAClC,IAAII,KAAK,GAAGlB,KAAK,CAACiB,KAAK,CAACH,KAAK,GAAG,CAAC,CAAC;MAClC,IAAIK,QAAQ,GAAG,CAAC,GAAGH,MAAM,EAAEP,WAAW,EAAE,GAAGS,KAAK,CAAC;MACjDf,QAAQ,CAACgB,QAAQ,CAAC;IACpB,CAAC;EACH;EAEA,SAASC,YAAYA,CAACC,KAAK,EAAE;IAE3B,SAASC,eAAeA,CAACtB,KAAK,EAAEuB,MAAM,EAAEC,IAAI,EAAE;MAE5Cb,OAAO,CAACC,GAAG,CAAE,kBAAiBW,MAAO,YAAWC,IAAK,EAAC,CAAC;MACvD,SAASC,YAAYA,CAACC,KAAK,EAAEC,OAAO,EAAEnB,IAAI,EAAE;QAC1C,IAAIoB,WAAW,GAAGF,KAAK,CAACG,SAAS,CAACF,OAAO,CAAC;QAC1C,IAAIX,MAAM,GAAGU,KAAK,CAACT,KAAK,CAAC,CAAC,EAAEW,WAAW,CAAC;QACxC,IAAIV,KAAK,GAAGQ,KAAK,CAACT,KAAK,CAACW,WAAW,CAAC;QACpC,OAAO,CAAC,GAAGZ,MAAM,EAAER,IAAI,EAAE,GAAGU,KAAK,CAAC;MACpC;MAEA,IAAIY,UAAU,GAAG9B,KAAK,CAAC+B,IAAI,CAACC,CAAC,IAAIA,CAAC,CAACC,EAAE,KAAKV,MAAM,CAAC;MACjD,IAAIW,IAAI,GAAGlC,KAAK,CAACmC,MAAM,CAACH,CAAC,IAAIA,CAAC,KAAKF,UAAU,CAAC;MAE9C,IAAIX,QAAQ,GAAG,EAAE;MACjB,IAAIK,IAAI,KAAK,QAAQ,EAAE;QACrBb,OAAO,CAACC,GAAG,CAAC,qBAAqB,CAAC;QAClCO,QAAQ,GAAG,CAAC,GAAGe,IAAI,EAAEJ,UAAU,CAAC;MAClC,CAAC,MAAM;QACLnB,OAAO,CAACC,GAAG,CAAC,aAAa,CAAC;QAC1BO,QAAQ,GAAGM,YAAY,CAACS,IAAI,EAAGF,CAAC,IAAIA,CAAC,CAACC,EAAE,KAAKT,IAAI,EAAGM,UAAU,CAAC;MACjE;MACA,OAAOX,QAAQ;IACjB;IAEAE,KAAK,CAACe,cAAc,CAAC,CAAC;IAEtB,IAAIpC,KAAK,CAACqC,MAAM,GAAG,CAAC,EAAE;MACpB,IAAId,MAAM,GAAGF,KAAK,CAACiB,YAAY,CAACC,OAAO,CAAC,WAAW,CAAC;;MAEpD;MACA;MACA,IAAIf,IAAI,GAAIH,KAAK,CAACmB,MAAM,CAACC,SAAS,KAAK,MAAM,GACzC,QAAQ,GAAGpB,KAAK,CAACmB,MAAM,CAACP,EAAE;MAE9B,IAAIV,MAAM,KAAKC,IAAI,IAAI,CAACkB,iBAAiB,CAACrB,KAAK,EAAErB,KAAK,CAAC,EAAE;QACvD,IAAImB,QAAQ,GAAGG,eAAe,CAACtB,KAAK,EAAEuB,MAAM,EAAEC,IAAI,CAAC;QACnDrB,QAAQ,CAACgB,QAAQ,CAAC;MACpB;IACF;EACF;EAEA,SAASwB,iBAAiBA,CAACtB,KAAK,EAAE;IAChC,OAAOA,KAAK,CAACmB,MAAM,CAACP,EAAE,KAAKZ,KAAK,CAACiB,YAAY,CAACC,OAAO,CAAC,WAAW,CAAC;EACpE;EAEA,SAASG,iBAAiBA,CAACrB,KAAK,EAAErB,KAAK,EAAE;IACvC,IAAI4C,OAAO,GAAGvB,KAAK,CAACiB,YAAY,CAACC,OAAO,CAAC,WAAW,CAAC;IACrD,IAAIM,OAAO,GAAGxB,KAAK,CAACmB,MAAM,CAACP,EAAE;IAC7B,MAAMa,QAAQ,GAAGb,EAAE,IAAIjC,KAAK,CAAC6B,SAAS,CAACG,CAAC,IAAIA,CAAC,CAACC,EAAE,KAAKA,EAAE,CAAC;IACxD,OAAOa,QAAQ,CAACD,OAAO,CAAC,GAAGC,QAAQ,CAACF,OAAO,CAAC,KAAK,CAAC;EACpD;EAEA,SAASG,gBAAgBA,CAAC1B,KAAK,EAAE;IAE/BA,KAAK,CAACe,cAAc,CAAC,CAAC;IACtB,IAAIf,KAAK,CAACmB,MAAM,CAACQ,OAAO,KAAK,IAAI,IAC5B,CAACL,iBAAiB,CAACtB,KAAK,CAAC,IACzB,CAACqB,iBAAiB,CAACrB,KAAK,EAAErB,KAAK,CAAC,EAAE;MACrCqB,KAAK,CAACmB,MAAM,CAACS,SAAS,CAACC,GAAG,CAAC,UAAU,CAAC;IACxC;EACF;EAGA,IAAI,CAACC,IAAI,EAAEC,OAAO,CAAC,GAAGzD,SAAS,CAAC0D,SAAS,CAACrD,KAAK,EAAGgC,CAAC,IAAIA,CAAC,CAACsB,MAAO,CAAC;EAEjE,IAAIrD,SAAS,GAAG;IAACC,GAAG,EAAEF,KAAK;IAAEI,EAAE,EAAED;EAAQ,CAAC;EAE1C,SAASoD,SAASA,CAAA,EAAG;IACnB,OAAOJ,IAAI,CAACK,GAAG,CAACxB,CAAC,iBACfnC,OAAA,CAAC4D,QAAQ;MAACxD,SAAS,EAAEA,SAAU;MAACK,SAAS,EAAEA,SAAU;MAAAoD,QAAA,EAAE1B;IAAC;MAAA2B,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAW,CAAC,CAAC;EACzE;EAEA,SAASC,YAAYA,CAAA,EAAG;IACtB,OAAOX,OAAO,CAACI,GAAG,CAACxB,CAAC,iBAClBnC,OAAA,CAAC4D,QAAQ;MAACxD,SAAS,EAAEA,SAAU;MAACK,SAAS,EAAEA,SAAU;MAAAoD,QAAA,EAAE1B;IAAC;MAAA2B,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAW,CAAC,CAAC;EACzE;EAEA,oBACEjE,OAAA;IAASoC,EAAE,EAAC,OAAO;IAAAyB,QAAA,gBACjB7D,OAAA;MAAI4C,SAAS,EAAC,MAAM;MAChBuB,UAAU,EAAEjB,gBAAiB;MAC7BkB,MAAM,EAAE7C,YAAa;MAAAsC,QAAA,eACvB7D,OAAA,CAACkE,YAAY;QAAAJ,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAE;IAAC;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACd,CAAC,eACLjE,OAAA;MAAI4C,SAAS,EAAC,UAAU;MAAAiB,QAAA,eACtB7D,OAAA,CAAC0D,SAAS;QAAAI,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAE;IAAC;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACX,CAAC;EAAA;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACE,CAAC;AAEd;AAACI,EAAA,GA7GQpE,QAAQ;AA+GjB,eAAeA,QAAQ;AAAC,IAAAoE,EAAA;AAAAC,YAAA,CAAAD,EAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}