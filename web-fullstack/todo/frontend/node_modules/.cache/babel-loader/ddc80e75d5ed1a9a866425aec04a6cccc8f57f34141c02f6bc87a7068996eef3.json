{"ast":null,"code":"var _jsxFileName = \"/home/andrewacashner/Documents/computing/javascript/react/todo/src/components/TaskList.js\";\nimport Utilities from \"../classes/Utilities\";\nimport ListItem from \"./ListItem\";\n\n// Drag and drop functions\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction moveWithinArray(items, fromID, toID) {\n  console.log(`Move from item ${fromID} to item ${toID}`);\n  function insertBefore(array, matchFn, item) {\n    let insertPoint = array.findIndex(matchFn);\n    let before = array.slice(0, insertPoint);\n    let after = array.slice(insertPoint);\n    return [...before, item, ...after];\n  }\n  let itemToMove = items.find(i => i.id === fromID);\n  let rest = items.filter(i => i !== itemToMove);\n  let newItems = [];\n  if (toID === \"bottom\") {\n    console.log(\"Move item to bottom\");\n    newItems = [...rest, itemToMove];\n  } else {\n    console.log(\"Insert item\");\n    newItems = insertBefore(rest, i => i.id === toID, itemToMove);\n  }\n  return newItems;\n}\nfunction isDraggedOverSelf(event) {\n  return event.target.id === event.dataTransfer.getData(\"text/uuid\");\n}\nfunction isDraggedOverNext(event, items) {\n  let dragged = event.dataTransfer.getData(\"text/uuid\");\n  let current = event.target.id;\n  const getIndex = id => items.findIndex(i => i.id === id);\n  return getIndex(current) - getIndex(dragged) === 1;\n}\nfunction dropListItem(event, [items, setItems]) {\n  event.preventDefault();\n  if (items.length > 1) {\n    let fromID = event.dataTransfer.getData(\"text/uuid\");\n\n    // Check if item was dropped below the list items, in the extra space we\n    // leave at bottom of the ol.todo\n    let toID = event.target.className === \"todo\" ? \"bottom\" : event.target.id;\n    if (fromID !== toID && !isDraggedOverNext(event, items)) {\n      let newItems = moveWithinArray(items, fromID, toID);\n      setItems(newItems);\n    }\n  }\n}\nfunction TaskList(props) {\n  let [items, setItems] = props.items;\n  function dragoverListItem(event) {\n    event.preventDefault();\n    if (event.target.tagName === \"LI\" && !isDraggedOverSelf(event) && !isDraggedOverNext(event, items)) {\n      event.target.classList.add(\"gapAbove\");\n    }\n  }\n  function makeListItem(item) {\n    return /*#__PURE__*/_jsxDEV(ListItem, {\n      ...props,\n      children: item\n    }, item.id, false, {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 7\n    }, this);\n  }\n  let [done, notDone] = Utilities.partition(items, i => i.isDone);\n  const ItemsDone = () => done.map(makeListItem);\n  const ItemsNotDone = () => notDone.map(makeListItem);\n  return /*#__PURE__*/_jsxDEV(\"section\", {\n    id: \"lists\",\n    children: [/*#__PURE__*/_jsxDEV(\"ol\", {\n      className: \"todo\",\n      onDragOver: dragoverListItem,\n      onDrop: dropListItem,\n      children: /*#__PURE__*/_jsxDEV(ItemsNotDone, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 87,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"ol\", {\n      className: \"todoDone\",\n      children: /*#__PURE__*/_jsxDEV(ItemsDone, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 90,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 83,\n    columnNumber: 5\n  }, this);\n}\n_c = TaskList;\nexport default TaskList;\nvar _c;\n$RefreshReg$(_c, \"TaskList\");","map":{"version":3,"names":["Utilities","ListItem","jsxDEV","_jsxDEV","moveWithinArray","items","fromID","toID","console","log","insertBefore","array","matchFn","item","insertPoint","findIndex","before","slice","after","itemToMove","find","i","id","rest","filter","newItems","isDraggedOverSelf","event","target","dataTransfer","getData","isDraggedOverNext","dragged","current","getIndex","dropListItem","setItems","preventDefault","length","className","TaskList","props","dragoverListItem","tagName","classList","add","makeListItem","children","fileName","_jsxFileName","lineNumber","columnNumber","done","notDone","partition","isDone","ItemsDone","map","ItemsNotDone","onDragOver","onDrop","_c","$RefreshReg$"],"sources":["/home/andrewacashner/Documents/computing/javascript/react/todo/src/components/TaskList.js"],"sourcesContent":["import Utilities from \"../classes/Utilities\";\nimport ListItem from \"./ListItem\";\n\n// Drag and drop functions\nfunction moveWithinArray(items, fromID, toID) {\n  console.log(`Move from item ${fromID} to item ${toID}`);\n  function insertBefore(array, matchFn, item) {\n    let insertPoint = array.findIndex(matchFn);\n    let before = array.slice(0, insertPoint);\n    let after = array.slice(insertPoint);\n    return [...before, item, ...after];\n  }\n\n  let itemToMove = items.find(i => i.id === fromID);\n  let rest = items.filter(i => i !== itemToMove);\n\n  let newItems = [];\n  if (toID === \"bottom\") {\n    console.log(\"Move item to bottom\");\n    newItems = [...rest, itemToMove];\n  } else {\n    console.log(\"Insert item\");\n    newItems = insertBefore(rest, (i => i.id === toID), itemToMove);\n  }\n  return newItems;\n}\n\nfunction isDraggedOverSelf(event) {\n  return event.target.id === event.dataTransfer.getData(\"text/uuid\");\n}\n\nfunction isDraggedOverNext(event, items) {\n  let dragged = event.dataTransfer.getData(\"text/uuid\");\n  let current = event.target.id;\n  const getIndex = id => items.findIndex(i => i.id === id);\n  return getIndex(current) - getIndex(dragged) === 1;\n}\n\nfunction dropListItem(event, [items, setItems]) {\n  event.preventDefault()\n\n  if (items.length > 1) {\n    let fromID = event.dataTransfer.getData(\"text/uuid\");\n\n    // Check if item was dropped below the list items, in the extra space we\n    // leave at bottom of the ol.todo\n    let toID = (event.target.className === \"todo\") \n      ? \"bottom\" : event.target.id;\n\n    if (fromID !== toID && !isDraggedOverNext(event, items)) {\n      let newItems = moveWithinArray(items, fromID, toID);\n      setItems(newItems);\n    }\n  }\n}\n\nfunction TaskList(props) {\n  let [items, setItems] = props.items;\n\n  \n\n  function dragoverListItem(event) {\n    event.preventDefault();\n    if (event.target.tagName === \"LI\" \n      && !isDraggedOverSelf(event) \n      && !isDraggedOverNext(event, items)) {\n      event.target.classList.add(\"gapAbove\");\n    }\n  }\n \n  function makeListItem(item) {\n    return(\n      <ListItem key={item.id} {...props}>{item}</ListItem>\n    );\n  }\n\n  let [done, notDone] = Utilities.partition(items, (i => i.isDone));\n\n  const ItemsDone = () => done.map(makeListItem);\n  const ItemsNotDone= () => notDone.map(makeListItem);\n\n  return(\n    <section id=\"lists\">\n      <ol className=\"todo\"\n          onDragOver={dragoverListItem}\n          onDrop={dropListItem}>\n        <ItemsNotDone />\n      </ol>\n      <ol className=\"todoDone\">\n        <ItemsDone />\n      </ol>\n    </section>\n  );\n}\n\nexport default TaskList;\n\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}