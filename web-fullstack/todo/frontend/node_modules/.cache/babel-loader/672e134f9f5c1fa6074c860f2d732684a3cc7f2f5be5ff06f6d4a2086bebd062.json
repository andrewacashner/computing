{"ast":null,"code":"'use strict';\n\nvar ISODefaults = require('../var/ISODefaults'),\n  setDate = require('./setDate'),\n  getDate = require('./getDate'),\n  cloneDate = require('./cloneDate'),\n  isUndefined = require('../../common/internal/isUndefined'),\n  moveToEndOfWeek = require('./moveToEndOfWeek'),\n  moveToBeginningOfWeek = require('./moveToBeginningOfWeek'),\n  moveToFirstDayOfWeekYear = require('./moveToFirstDayOfWeekYear');\nvar ISO_FIRST_DAY_OF_WEEK = ISODefaults.ISO_FIRST_DAY_OF_WEEK,\n  ISO_FIRST_DAY_OF_WEEK_YEAR = ISODefaults.ISO_FIRST_DAY_OF_WEEK_YEAR;\nfunction getWeekNumber(d, allowPrevious, firstDayOfWeek, firstDayOfWeekYear) {\n  var isoWeek,\n    n = 0;\n  if (isUndefined(firstDayOfWeek)) {\n    firstDayOfWeek = ISO_FIRST_DAY_OF_WEEK;\n  }\n  if (isUndefined(firstDayOfWeekYear)) {\n    firstDayOfWeekYear = ISO_FIRST_DAY_OF_WEEK_YEAR;\n  }\n  // Moving to the end of the week allows for forward year traversal, ie\n  // Dec 29 2014 is actually week 01 of 2015.\n  isoWeek = moveToEndOfWeek(cloneDate(d), firstDayOfWeek);\n  moveToFirstDayOfWeekYear(isoWeek, firstDayOfWeek, firstDayOfWeekYear);\n  if (allowPrevious && d < isoWeek) {\n    // If the date is still before the start of the year, then it should be\n    // the last week of the previous year, ie Jan 1 2016 is actually week 53\n    // of 2015, so move to the beginning of the week to traverse the year.\n    isoWeek = moveToBeginningOfWeek(cloneDate(d), firstDayOfWeek);\n    moveToFirstDayOfWeekYear(isoWeek, firstDayOfWeek, firstDayOfWeekYear);\n  }\n  while (isoWeek <= d) {\n    // Doing a very simple walk to get the week number.\n    setDate(isoWeek, getDate(isoWeek) + 7);\n    n++;\n  }\n  return n;\n}\nmodule.exports = getWeekNumber;","map":{"version":3,"names":["ISODefaults","require","setDate","getDate","cloneDate","isUndefined","moveToEndOfWeek","moveToBeginningOfWeek","moveToFirstDayOfWeekYear","ISO_FIRST_DAY_OF_WEEK","ISO_FIRST_DAY_OF_WEEK_YEAR","getWeekNumber","d","allowPrevious","firstDayOfWeek","firstDayOfWeekYear","isoWeek","n","module","exports"],"sources":["/home/andrewacashner/Documents/computing/javascript/react/todo/node_modules/sugar-date/date/internal/getWeekNumber.js"],"sourcesContent":["'use strict';\n\nvar ISODefaults = require('../var/ISODefaults'),\n    setDate = require('./setDate'),\n    getDate = require('./getDate'),\n    cloneDate = require('./cloneDate'),\n    isUndefined = require('../../common/internal/isUndefined'),\n    moveToEndOfWeek = require('./moveToEndOfWeek'),\n    moveToBeginningOfWeek = require('./moveToBeginningOfWeek'),\n    moveToFirstDayOfWeekYear = require('./moveToFirstDayOfWeekYear');\n\nvar ISO_FIRST_DAY_OF_WEEK = ISODefaults.ISO_FIRST_DAY_OF_WEEK,\n    ISO_FIRST_DAY_OF_WEEK_YEAR = ISODefaults.ISO_FIRST_DAY_OF_WEEK_YEAR;\n\nfunction getWeekNumber(d, allowPrevious, firstDayOfWeek, firstDayOfWeekYear) {\n  var isoWeek, n = 0;\n  if (isUndefined(firstDayOfWeek)) {\n    firstDayOfWeek = ISO_FIRST_DAY_OF_WEEK;\n  }\n  if (isUndefined(firstDayOfWeekYear)) {\n    firstDayOfWeekYear = ISO_FIRST_DAY_OF_WEEK_YEAR;\n  }\n  // Moving to the end of the week allows for forward year traversal, ie\n  // Dec 29 2014 is actually week 01 of 2015.\n  isoWeek = moveToEndOfWeek(cloneDate(d), firstDayOfWeek);\n  moveToFirstDayOfWeekYear(isoWeek, firstDayOfWeek, firstDayOfWeekYear);\n  if (allowPrevious && d < isoWeek) {\n    // If the date is still before the start of the year, then it should be\n    // the last week of the previous year, ie Jan 1 2016 is actually week 53\n    // of 2015, so move to the beginning of the week to traverse the year.\n    isoWeek = moveToBeginningOfWeek(cloneDate(d), firstDayOfWeek);\n    moveToFirstDayOfWeekYear(isoWeek, firstDayOfWeek, firstDayOfWeekYear);\n  }\n  while (isoWeek <= d) {\n    // Doing a very simple walk to get the week number.\n    setDate(isoWeek, getDate(isoWeek) + 7);\n    n++;\n  }\n  return n;\n}\n\nmodule.exports = getWeekNumber;"],"mappings":"AAAA,YAAY;;AAEZ,IAAIA,WAAW,GAAGC,OAAO,CAAC,oBAAoB,CAAC;EAC3CC,OAAO,GAAGD,OAAO,CAAC,WAAW,CAAC;EAC9BE,OAAO,GAAGF,OAAO,CAAC,WAAW,CAAC;EAC9BG,SAAS,GAAGH,OAAO,CAAC,aAAa,CAAC;EAClCI,WAAW,GAAGJ,OAAO,CAAC,mCAAmC,CAAC;EAC1DK,eAAe,GAAGL,OAAO,CAAC,mBAAmB,CAAC;EAC9CM,qBAAqB,GAAGN,OAAO,CAAC,yBAAyB,CAAC;EAC1DO,wBAAwB,GAAGP,OAAO,CAAC,4BAA4B,CAAC;AAEpE,IAAIQ,qBAAqB,GAAGT,WAAW,CAACS,qBAAqB;EACzDC,0BAA0B,GAAGV,WAAW,CAACU,0BAA0B;AAEvE,SAASC,aAAaA,CAACC,CAAC,EAAEC,aAAa,EAAEC,cAAc,EAAEC,kBAAkB,EAAE;EAC3E,IAAIC,OAAO;IAAEC,CAAC,GAAG,CAAC;EAClB,IAAIZ,WAAW,CAACS,cAAc,CAAC,EAAE;IAC/BA,cAAc,GAAGL,qBAAqB;EACxC;EACA,IAAIJ,WAAW,CAACU,kBAAkB,CAAC,EAAE;IACnCA,kBAAkB,GAAGL,0BAA0B;EACjD;EACA;EACA;EACAM,OAAO,GAAGV,eAAe,CAACF,SAAS,CAACQ,CAAC,CAAC,EAAEE,cAAc,CAAC;EACvDN,wBAAwB,CAACQ,OAAO,EAAEF,cAAc,EAAEC,kBAAkB,CAAC;EACrE,IAAIF,aAAa,IAAID,CAAC,GAAGI,OAAO,EAAE;IAChC;IACA;IACA;IACAA,OAAO,GAAGT,qBAAqB,CAACH,SAAS,CAACQ,CAAC,CAAC,EAAEE,cAAc,CAAC;IAC7DN,wBAAwB,CAACQ,OAAO,EAAEF,cAAc,EAAEC,kBAAkB,CAAC;EACvE;EACA,OAAOC,OAAO,IAAIJ,CAAC,EAAE;IACnB;IACAV,OAAO,CAACc,OAAO,EAAEb,OAAO,CAACa,OAAO,CAAC,GAAG,CAAC,CAAC;IACtCC,CAAC,EAAE;EACL;EACA,OAAOA,CAAC;AACV;AAEAC,MAAM,CAACC,OAAO,GAAGR,aAAa"},"metadata":{},"sourceType":"script","externalDependencies":[]}