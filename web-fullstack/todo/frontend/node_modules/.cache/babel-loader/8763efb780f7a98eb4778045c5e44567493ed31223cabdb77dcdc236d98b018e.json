{"ast":null,"code":"import{useContext}from\"react\";import ToDoContext from\"../store/ToDoContext\";import ListItem from\"./ListItem\";// Drag and drop functions\nimport{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function isDraggedOverSelf(event){return event.target.id===event.dataTransfer.getData(\"text/uuid\");}function isDraggedOverNext(event,items){let dragged=event.dataTransfer.getData(\"text/uuid\");let current=event.target.id;const getIndex=id=>items.list.findIndex(i=>i.id===id);return getIndex(current)-getIndex(dragged)===1;}function TaskList(){let context=useContext(ToDoContext);let items=context.get;let setItems=context.set;function dropListItem(event){event.preventDefault();if(items.list.length>1){let fromID=event.dataTransfer.getData(\"text/uuid\");// Check if item was dropped below the list items, in the extra space we\n// leave at bottom of the ol.todo\nlet toID=event.target.className===\"todo\"?\"bottom\":event.target.id;if(fromID!==toID&&!isDraggedOverNext(event,items)){setItems(prevItems=>prevItems.moveWithinArray(fromID,toID));}}}function dragoverListItem(event){event.preventDefault();if(event.target.tagName===\"LI\"&&!isDraggedOverSelf(event)&&!isDraggedOverNext(event,items)){event.target.classList.add(\"gapAbove\");}}function makeListItem(item){return/*#__PURE__*/_jsx(ListItem,{children:item},item.id);}if(items.list.length>0){let[done,notDone]=items.partition(i=>i.isDone);const ItemsDone=()=>done?done.list.map(makeListItem):null;const ItemsNotDone=()=>notDone?notDone.list.map(makeListItem):null;return/*#__PURE__*/_jsxs(\"section\",{id:\"lists\",children:[/*#__PURE__*/_jsx(\"ol\",{className:\"todo\",onDragOver:dragoverListItem,onDrop:dropListItem,children:/*#__PURE__*/_jsx(ItemsNotDone,{})}),/*#__PURE__*/_jsx(\"ol\",{className:\"todoDone\",children:/*#__PURE__*/_jsx(ItemsDone,{})})]});}}export default TaskList;","map":{"version":3,"names":["useContext","ToDoContext","ListItem","jsx","_jsx","jsxs","_jsxs","isDraggedOverSelf","event","target","id","dataTransfer","getData","isDraggedOverNext","items","dragged","current","getIndex","list","findIndex","i","TaskList","context","get","setItems","set","dropListItem","preventDefault","length","fromID","toID","className","prevItems","moveWithinArray","dragoverListItem","tagName","classList","add","makeListItem","item","children","done","notDone","partition","isDone","ItemsDone","map","ItemsNotDone","onDragOver","onDrop"],"sources":["/home/andrewacashner/Documents/computing/javascript/react/todo/src/components/TaskList.js"],"sourcesContent":["import { useContext } from \"react\";\nimport ToDoContext from \"../store/ToDoContext\";\nimport ListItem from \"./ListItem\";\n\n// Drag and drop functions\nfunction isDraggedOverSelf(event) {\n  return event.target.id === event.dataTransfer.getData(\"text/uuid\");\n}\n\nfunction isDraggedOverNext(event, items) {\n  let dragged = event.dataTransfer.getData(\"text/uuid\");\n  let current = event.target.id;\n  const getIndex = id => items.list.findIndex(i => i.id === id);\n  return getIndex(current) - getIndex(dragged) === 1;\n}\n\nfunction TaskList() {\n  let context = useContext(ToDoContext);\n  let items = context.get;\n  let setItems = context.set;\n\n  function dropListItem(event) {\n    event.preventDefault()\n\n    if (items.list.length > 1) {\n      let fromID = event.dataTransfer.getData(\"text/uuid\");\n\n      // Check if item was dropped below the list items, in the extra space we\n      // leave at bottom of the ol.todo\n      let toID = (event.target.className === \"todo\") \n        ? \"bottom\" : event.target.id;\n\n      if (fromID !== toID && !isDraggedOverNext(event, items)) {\n        setItems(prevItems => prevItems.moveWithinArray(fromID, toID));\n      }\n    }\n  }\n\n  function dragoverListItem(event) {\n    event.preventDefault();\n    if (event.target.tagName === \"LI\" \n      && !isDraggedOverSelf(event) \n      && !isDraggedOverNext(event, items)) {\n      event.target.classList.add(\"gapAbove\");\n    }\n  }\n \n  function makeListItem(item) {\n    return(\n      <ListItem key={item.id}>{item}</ListItem>\n    );\n  }\n\n  if (items.list.length > 0) {\n    let [done, notDone] = items.partition(i => i.isDone);\n    \n    const ItemsDone = () => (done) ? done.list.map(makeListItem) : null;\n    const ItemsNotDone = () => (notDone) ? notDone.list.map(makeListItem) : null;\n\n    return(\n      <section id=\"lists\">\n        <ol className=\"todo\"\n            onDragOver={dragoverListItem}\n            onDrop={dropListItem}>\n          <ItemsNotDone />\n        </ol>\n        <ol className=\"todoDone\">\n          <ItemsDone />\n        </ol>\n      </section>\n    );\n  }\n}\n\nexport default TaskList;\n\n"],"mappings":"AAAA,OAASA,UAAU,KAAQ,OAAO,CAClC,MAAO,CAAAC,WAAW,KAAM,sBAAsB,CAC9C,MAAO,CAAAC,QAAQ,KAAM,YAAY,CAEjC;AAAA,OAAAC,GAAA,IAAAC,IAAA,gCAAAC,IAAA,IAAAC,KAAA,yBACA,QAAS,CAAAC,iBAAiBA,CAACC,KAAK,CAAE,CAChC,MAAO,CAAAA,KAAK,CAACC,MAAM,CAACC,EAAE,GAAKF,KAAK,CAACG,YAAY,CAACC,OAAO,CAAC,WAAW,CAAC,CACpE,CAEA,QAAS,CAAAC,iBAAiBA,CAACL,KAAK,CAAEM,KAAK,CAAE,CACvC,GAAI,CAAAC,OAAO,CAAGP,KAAK,CAACG,YAAY,CAACC,OAAO,CAAC,WAAW,CAAC,CACrD,GAAI,CAAAI,OAAO,CAAGR,KAAK,CAACC,MAAM,CAACC,EAAE,CAC7B,KAAM,CAAAO,QAAQ,CAAGP,EAAE,EAAII,KAAK,CAACI,IAAI,CAACC,SAAS,CAACC,CAAC,EAAIA,CAAC,CAACV,EAAE,GAAKA,EAAE,CAAC,CAC7D,MAAO,CAAAO,QAAQ,CAACD,OAAO,CAAC,CAAGC,QAAQ,CAACF,OAAO,CAAC,GAAK,CAAC,CACpD,CAEA,QAAS,CAAAM,QAAQA,CAAA,CAAG,CAClB,GAAI,CAAAC,OAAO,CAAGtB,UAAU,CAACC,WAAW,CAAC,CACrC,GAAI,CAAAa,KAAK,CAAGQ,OAAO,CAACC,GAAG,CACvB,GAAI,CAAAC,QAAQ,CAAGF,OAAO,CAACG,GAAG,CAE1B,QAAS,CAAAC,YAAYA,CAAClB,KAAK,CAAE,CAC3BA,KAAK,CAACmB,cAAc,CAAC,CAAC,CAEtB,GAAIb,KAAK,CAACI,IAAI,CAACU,MAAM,CAAG,CAAC,CAAE,CACzB,GAAI,CAAAC,MAAM,CAAGrB,KAAK,CAACG,YAAY,CAACC,OAAO,CAAC,WAAW,CAAC,CAEpD;AACA;AACA,GAAI,CAAAkB,IAAI,CAAItB,KAAK,CAACC,MAAM,CAACsB,SAAS,GAAK,MAAM,CACzC,QAAQ,CAAGvB,KAAK,CAACC,MAAM,CAACC,EAAE,CAE9B,GAAImB,MAAM,GAAKC,IAAI,EAAI,CAACjB,iBAAiB,CAACL,KAAK,CAAEM,KAAK,CAAC,CAAE,CACvDU,QAAQ,CAACQ,SAAS,EAAIA,SAAS,CAACC,eAAe,CAACJ,MAAM,CAAEC,IAAI,CAAC,CAAC,CAChE,CACF,CACF,CAEA,QAAS,CAAAI,gBAAgBA,CAAC1B,KAAK,CAAE,CAC/BA,KAAK,CAACmB,cAAc,CAAC,CAAC,CACtB,GAAInB,KAAK,CAACC,MAAM,CAAC0B,OAAO,GAAK,IAAI,EAC5B,CAAC5B,iBAAiB,CAACC,KAAK,CAAC,EACzB,CAACK,iBAAiB,CAACL,KAAK,CAAEM,KAAK,CAAC,CAAE,CACrCN,KAAK,CAACC,MAAM,CAAC2B,SAAS,CAACC,GAAG,CAAC,UAAU,CAAC,CACxC,CACF,CAEA,QAAS,CAAAC,YAAYA,CAACC,IAAI,CAAE,CAC1B,mBACEnC,IAAA,CAACF,QAAQ,EAAAsC,QAAA,CAAgBD,IAAI,EAAdA,IAAI,CAAC7B,EAAoB,CAAC,CAE7C,CAEA,GAAII,KAAK,CAACI,IAAI,CAACU,MAAM,CAAG,CAAC,CAAE,CACzB,GAAI,CAACa,IAAI,CAAEC,OAAO,CAAC,CAAG5B,KAAK,CAAC6B,SAAS,CAACvB,CAAC,EAAIA,CAAC,CAACwB,MAAM,CAAC,CAEpD,KAAM,CAAAC,SAAS,CAAGA,CAAA,GAAOJ,IAAI,CAAIA,IAAI,CAACvB,IAAI,CAAC4B,GAAG,CAACR,YAAY,CAAC,CAAG,IAAI,CACnE,KAAM,CAAAS,YAAY,CAAGA,CAAA,GAAOL,OAAO,CAAIA,OAAO,CAACxB,IAAI,CAAC4B,GAAG,CAACR,YAAY,CAAC,CAAG,IAAI,CAE5E,mBACEhC,KAAA,YAASI,EAAE,CAAC,OAAO,CAAA8B,QAAA,eACjBpC,IAAA,OAAI2B,SAAS,CAAC,MAAM,CAChBiB,UAAU,CAAEd,gBAAiB,CAC7Be,MAAM,CAAEvB,YAAa,CAAAc,QAAA,cACvBpC,IAAA,CAAC2C,YAAY,GAAE,CAAC,CACd,CAAC,cACL3C,IAAA,OAAI2B,SAAS,CAAC,UAAU,CAAAS,QAAA,cACtBpC,IAAA,CAACyC,SAAS,GAAE,CAAC,CACX,CAAC,EACE,CAAC,CAEd,CACF,CAEA,cAAe,CAAAxB,QAAQ"},"metadata":{},"sourceType":"module","externalDependencies":[]}